# 🧭 方向探索派对 - 使用指南

## 🚀 快速开始

### 一键启动
```bash
python3 start_app.py
```

这个脚本会自动：
- ✅ 检查环境和依赖
- ✅ 创建虚拟环境
- ✅ 安装必要的包
- ✅ 启动后端服务 (http://localhost:8000)
- ✅ 启动前端服务 (http://localhost:3000)
- ✅ 自动打开浏览器

### 手动启动

如果需要分别启动服务：

**启动后端:**
```bash
python3 start_backend.py
```

**启动前端:**
```bash
python3 start_frontend.py
```

## 📱 使用说明

### 1. 设备要求
- 📱 **移动设备**: 支持陀螺仪和GPS的智能手机或平板
- 🌐 **浏览器**: Safari (iOS)、Chrome (Android) 或其他现代浏览器
- 📡 **网络**: 需要网络连接获取地理信息和图片

### 2. 权限设置
首次使用时需要授权以下权限：

#### iOS Safari:
1. 访问 http://localhost:3000
2. 允许"位置访问"权限
3. 允许"动作与方向"权限

#### Android Chrome:
1. 访问 http://localhost:3000
2. 允许"位置信息"权限
3. 允许"设备方向"权限

### 3. 操作步骤

#### 步骤 1: 获取位置
- 点击 "📍 刷新位置" 按钮
- 等待GPS定位完成
- 确认当前位置信息显示正确

#### 步骤 2: 调整设置
- 点击 "⚙️" 设置按钮
- 选择分段距离 (50km/100km/200km)
- 选择时间模式:
  - 🌟 **现代模式**: 显示当前地点信息
  - 📜 **过去模式**: 显示100年前的历史
  - 🚀 **未来模式**: 显示AI生成的未来场景
- 调整速度设置 (默认120km/h)

#### 步骤 3: 开始探索
- 手持设备，面向想要探索的方向
- 观察指南针显示当前朝向
- 点击 "🚀 开始探索" 按钮
- 等待计算完成

#### 步骤 4: 浏览结果
- 查看生成的地点卡片
- 每个卡片包含:
  - 📍 地点名称和坐标
  - 🖼️ 地点图片
  - 📝 趣味介绍
  - 📏 距离信息

## 🎯 使用技巧

### 获得最佳体验
1. **在户外使用**: GPS信号更强，定位更准确
2. **保持设备水平**: 指南针读数更精确
3. **尝试不同方向**: 探索世界各个角落
4. **切换时间模式**: 体验不同时代的魅力

### 桌面测试
如果在桌面浏览器中测试，可以使用控制台调试功能：

```javascript
// 模拟方向（0-360度）
simulateHeading(90);  // 东方
simulateHeading(180); // 南方
simulateHeading(270); // 西方
simulateHeading(0);   // 北方

// 查看调试信息
debugInfo();
```

## 🔧 故障排除

### 常见问题

#### 1. 无法获取位置
**问题**: 显示"获取位置失败"
**解决方案**:
- 确保已授权位置权限
- 检查GPS是否开启
- 尝试在户外使用
- 刷新页面重新授权

#### 2. 指南针不工作
**问题**: 方向显示为"--°"
**解决方案**:
- 确保设备支持陀螺仪
- 授权设备方向权限
- 尝试校准设备指南针
- 在iOS上确保允许"动作与方向"

#### 3. 探索按钮无响应
**问题**: 点击探索按钮没有反应
**解决方案**:
- 确保已获取到位置信息
- 检查网络连接
- 确认后端服务正在运行
- 查看浏览器控制台错误信息

#### 4. 图片无法加载
**问题**: 地点卡片显示占位图片
**解决方案**:
- 检查网络连接
- 确认防火墙未阻止图片请求
- 等待图片加载完成

### 服务端问题

#### 后端服务无法启动
```bash
# 检查端口是否被占用
lsof -i :8000

# 手动启动后端进行调试
cd backend
python main.py
```

#### 前端服务无法启动
```bash
# 检查端口是否被占用
lsof -i :3000

# 使用其他端口
python -m http.server 8080
```

## 📊 API 接口

### 主要端点
- `GET /` - 服务状态
- `GET /api/health` - 健康检查
- `POST /api/explore` - 探索方向
- `GET /api/places/{mode}` - 获取地点数据
- `GET /docs` - API文档

### 测试API
```bash
# 运行API测试
python test_api.py
```

## 🎨 自定义

### 添加新地点
编辑 `backend/main.py` 中的 `places_data` 字典，添加新的地点信息：

```python
{
    "name": "地点名称",
    "latitude": 纬度,
    "longitude": 经度,
    "country": "国家",
    "city": "城市",
    "description": "描述信息",
    "image": "图片URL"
}
```

### 修改样式
编辑 `styles.css` 文件自定义界面外观。

### 调整算法
修改 `backend/main.py` 中的计算逻辑，如分段距离、搜索范围等。

## 🤝 技术支持

如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 后端服务日志
3. 网络连接状态
4. 设备权限设置

---

**祝您探索愉快！** 🌍✨