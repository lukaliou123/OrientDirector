# ğŸš€ OrientDiscover æœ¬åœ°å¯åŠ¨æŒ‡å—

## ç¯å¢ƒè¦æ±‚

- **Python 3.9**ï¼ˆå¿…é¡»ä½¿ç”¨ Python 3.9ï¼Œé¿å…å…¼å®¹æ€§é—®é¢˜ï¼‰
- Git
- Condaï¼ˆæ¨èï¼‰æˆ– venv
- ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safari ç­‰ï¼‰
- macOS/Linux ç³»ç»Ÿï¼ˆæ”¯æŒ `lsof` å‘½ä»¤ï¼‰

## å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/hangeaiagent/OrientDiscover.git
cd OrientDiscover
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

#### ä½¿ç”¨ Condaï¼ˆæ¨èï¼‰
```bash
# åˆ›å»º Python 3.9 ç¯å¢ƒ
conda create -n orient python=3.9 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate orient
```

#### ä½¿ç”¨ venvï¼ˆå¤‡é€‰ï¼‰
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.9 -m venv orient_env

# æ¿€æ´»ç¯å¢ƒ
source orient_env/bin/activate  # macOS/Linux
# æˆ–
orient_env\Scripts\activate     # Windows
```



### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å®‰è£…PyJWTï¼ˆå¦‚æœrequirements.txtä¸­æ²¡æœ‰ï¼‰
pip install PyJWT

# å®‰è£…å…¶ä»–å¿…è¦ä¾èµ–
pip install fastapi uvicorn python-multipart
```

### 4. ç¯å¢ƒé…ç½®

#### è®¾ç½®æœ¬åœ°ç¯å¢ƒå˜é‡
```bash
# è®¾ç½®ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒ
export isUsedomainnameaddress=false

# æˆ–è€…ä½¿ç”¨é…ç½®è„šæœ¬
./set_environment.sh local
```

### 5. å¯åŠ¨æœåŠ¡

#### æ–¹å¼ä¸€ï¼šç»Ÿä¸€å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯æœåŠ¡
python start_all.py
```

#### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨

**å¯åŠ¨åç«¯æœåŠ¡ï¼š**
```bash
python start_backend.py
```

**æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨å‰ç«¯æœåŠ¡ï¼š**
```bash
python start_frontend.py
```

#### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨

**å¯åŠ¨åç«¯æœåŠ¡ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š**
```bash
cd backend
python -m uvicorn main:app --host 0.0.0.0 --port 8001 --reload
```

**æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š**
```bash
python start_frontend.py
```

## è®¿é—®åº”ç”¨

- **å‰ç«¯åœ°å€**ï¼šhttp://localhost:3001
- **åç«¯ API**ï¼šhttp://localhost:8001
- **API æ–‡æ¡£**ï¼šhttp://localhost:8001/docs
- **ç¯å¢ƒé…ç½®é¡µé¢**ï¼šhttp://localhost:3001/environment_config.html

## æœåŠ¡ç«¯å£è¯´æ˜

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ | 3001 | é™æ€æ–‡ä»¶æœåŠ¡å™¨ |
| åç«¯ | 8001 | FastAPI æœåŠ¡å™¨ |
| æ—¥å¿—ç›®å½• | logs/ | åç«¯æ—¥å¿—æ–‡ä»¶ |

## ç¯å¢ƒé…ç½®è¯´æ˜

### æœ¬åœ°å¼€å‘ç¯å¢ƒ
- **ç¯å¢ƒå˜é‡**ï¼š`isUsedomainnameaddress=false`
- **API_BASE_URL**ï¼š`http://localhost:8001`
- **ç”¨é€”**ï¼šæœ¬åœ°å¼€å‘å’Œè°ƒè¯•

### ç”Ÿäº§ç¯å¢ƒ
- **ç¯å¢ƒå˜é‡**ï¼š`isUsedomainnameaddress=true`
- **API_BASE_URL**ï¼š`https://doro.gitagent.io`
- **ç”¨é€”**ï¼šç”Ÿäº§éƒ¨ç½²

### ç¯å¢ƒåˆ‡æ¢æ–¹æ³•

#### æ–¹æ³•1ï¼šä½¿ç”¨é…ç½®è„šæœ¬
```bash
# åˆ‡æ¢åˆ°æœ¬åœ°ç¯å¢ƒ
./set_environment.sh local

# åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
./set_environment.sh production

# æŸ¥çœ‹å½“å‰çŠ¶æ€
./set_environment.sh status
```

#### æ–¹æ³•2ï¼šæµè§ˆå™¨æ§åˆ¶å°
```javascript
// åˆ‡æ¢åˆ°æœ¬åœ°ç¯å¢ƒ
EnvironmentConfig.setUseDomainName(false);

// åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
EnvironmentConfig.setUseDomainName(true);

// æŸ¥çœ‹å½“å‰çŠ¶æ€
EnvironmentConfig.showStatus();
```

#### æ–¹æ³•3ï¼šå¯è§†åŒ–ç•Œé¢
è®¿é—® `http://localhost:3001/environment_config.html` è¿›è¡Œå›¾å½¢åŒ–é…ç½®

## å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤ºç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# è‡ªåŠ¨æ¸…ç†ç«¯å£ï¼ˆæ¨èï¼‰
python start_all.py

# æ‰‹åŠ¨æ¸…ç†ç«¯å£
lsof -ti :8001 | xargs kill -9
lsof -ti :3001 | xargs kill -9

# æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ
lsof -i :8001
lsof -i :3001
```

### 2. åç«¯å¯åŠ¨å¤±è´¥

**é—®é¢˜**ï¼š`ModuleNotFoundError: No module named 'jwt'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…ç¼ºå¤±çš„ä¾èµ–
pip install PyJWT

# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

### 3. ç¯å¢ƒé…ç½®é—®é¢˜

**é—®é¢˜**ï¼šAPIè°ƒç”¨å¤±è´¥æˆ–è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥å½“å‰ç¯å¢ƒé…ç½®
./set_environment.sh status

# è®¾ç½®ä¸ºæœ¬åœ°ç¯å¢ƒ
./set_environment.sh local

# åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½é…ç½®
```

### 4. æ–¹å‘è·å–å¤±è´¥

**é—®é¢˜**ï¼šåº”ç”¨æ— æ³•è‡ªåŠ¨è·å–è®¾å¤‡æ–¹å‘

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç­‰å¾… 1 ç§’åä¼šè‡ªåŠ¨æ˜¾ç¤ºæ‰‹åŠ¨è¾“å…¥æ¡†
- ç‚¹å‡»æŒ‡å—é’ˆä»»æ„ä½ç½®è®¾ç½®æ–¹å‘
- æˆ–åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–¹å‘è§’åº¦ï¼ˆ0-359Â°ï¼‰

### 5. ä½ç½®æƒé™è¢«æ‹’ç»

**é—®é¢˜**ï¼šæµè§ˆå™¨æ‹’ç»ä½ç½®è®¿é—®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ï¼Œå…è®¸ localhost:3001 è®¿é—®ä½ç½®
2. åˆ·æ–°é¡µé¢é‡æ–°æˆæƒ
3. ä½¿ç”¨ HTTPS ç¯å¢ƒï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### 6. Python ç‰ˆæœ¬é—®é¢˜

**é—®é¢˜**ï¼š`ModuleNotFoundError` æˆ–å…¼å®¹æ€§é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version

# ç¡®ä¿ä½¿ç”¨ Python 3.9
conda create -n orient python=3.9 -y
conda activate orient
```

## å¼€å‘è°ƒè¯•

### æŸ¥çœ‹æ—¥å¿—

- **å‰ç«¯æ—¥å¿—**ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°
- **åç«¯æ—¥å¿—**ï¼š`logs/backend.log` æ–‡ä»¶
- **åº”ç”¨å†…æ—¥å¿—**ï¼šé¡µé¢åº•éƒ¨çš„æ—¥å¿—é¢æ¿

### å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f logs/backend.log

# æŸ¥çœ‹å®Œæ•´æ—¥å¿—
cat logs/backend.log
```

### æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8001/api/health

# ç¯å¢ƒé…ç½®æ£€æŸ¥
curl http://localhost:8001/api/config/environment

# æµ‹è¯•æ¢ç´¢åŠŸèƒ½
curl -X POST http://localhost:8001/api/explore-real \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 40.0,
    "longitude": 116.0,
    "heading": 90,
    "segment_distance": 10,
    "time_mode": "present"
  }'
```

### æ¸…ç†ç¼“å­˜

```bash
# åˆ é™¤ API å“åº”ç¼“å­˜
rm backend/data_cache.json

# æ¸…ç† Python ç¼“å­˜
find . -type d -name __pycache__ -exec rm -r {} +

# æ¸…ç†æ—¥å¿—æ–‡ä»¶
rm -f logs/*.log logs/*.pid
```

## åœæ­¢æœåŠ¡

### ä¼˜é›…åœæ­¢
- **Ctrl+C**ï¼šåœ¨å„ä¸ªç»ˆç«¯ä¸­åœæ­¢å¯¹åº”çš„æœåŠ¡

### å¼ºåˆ¶åœæ­¢
```bash
# æŸ¥æ‰¾å¹¶åœæ­¢ Python è¿›ç¨‹
pkill -f "uvicorn"
pkill -f "python.*frontend"

# æˆ–è€…ä½¿ç”¨ç«¯å£æ¸…ç†
lsof -ti :8001 | xargs kill -9
lsof -ti :3001 | xargs kill -9
```

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8001
lsof -i :3001

# æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
ps aux | grep uvicorn
ps aux | grep python
```

## å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# 1. æ¿€æ´»ç¯å¢ƒ
conda activate orient

# 2. è®¾ç½®æœ¬åœ°ç¯å¢ƒ
export isUsedomainnameaddress=false

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
python start_all.py
```

### åˆ†æ­¥å¯åŠ¨
```bash
# 1. æ¿€æ´»ç¯å¢ƒ
conda activate orient

# 2. è®¾ç½®æœ¬åœ°ç¯å¢ƒ
export isUsedomainnameaddress=false

# 3. å¯åŠ¨åç«¯
python start_backend.py

# 4. æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨å‰ç«¯
python start_frontend.py
```

## éƒ¨ç½²å»ºè®®

æœ¬åœ°å¼€å‘å®Œæˆåï¼Œå»ºè®®ï¼š
1. ä½¿ç”¨ HTTPS ç¯å¢ƒï¼ˆæ–¹å‘ API éœ€è¦ï¼‰
2. é…ç½®ç¯å¢ƒå˜é‡ç®¡ç† API å¯†é’¥
3. ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨ï¼ˆå¦‚ PM2ï¼‰ç®¡ç†æœåŠ¡
4. é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰ç»Ÿä¸€å…¥å£

## ç›¸å…³æ–‡æ¡£

- [æœ¬åœ°å¼€å‘åŠæœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€å˜é‡](./0904æœ¬åœ°å¼€å‘åŠæœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€å˜é‡.md)
- [æ–¹å‘é—®é¢˜ä¿®æ”¹](./æ–¹å‘é—®é¢˜ä¿®æ”¹.md)
- [é«˜å¾·åœ°å›¾ API é›†æˆ](../AMAP_API_INTEGRATION.md)
- [API å¯†é’¥è®¾ç½®](../API_KEYS_SETUP.md)

---

## ğŸ“‹ æ€»ç»“

### âœ… å·²å®Œæˆçš„é…ç½®
1. **ç«¯å£ç»Ÿä¸€**ï¼šå‰ç«¯3001ï¼Œåç«¯8001
2. **ç¯å¢ƒç®¡ç†**ï¼šæ”¯æŒæœ¬åœ°/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢
3. **è‡ªåŠ¨å¯åŠ¨**ï¼šæ™ºèƒ½ç«¯å£æ¸…ç†å’Œè¿›ç¨‹ç®¡ç†
4. **æ—¥å¿—ç³»ç»Ÿ**ï¼šå®Œæ•´çš„æ—¥å¿—è®°å½•å’Œç®¡ç†
5. **ä¾èµ–ç®¡ç†**ï¼šPython 3.9 + å¿…è¦ä¾èµ–

### ğŸš€ å¯åŠ¨æ–¹å¼
- **æ¨è**ï¼š`python start_all.py`ï¼ˆä¸€é”®å¯åŠ¨ï¼‰
- **å¤‡é€‰**ï¼šåˆ†åˆ«å¯åŠ¨å‰åç«¯æœåŠ¡
- **æ‰‹åŠ¨**ï¼šç›´æ¥ä½¿ç”¨uvicornå‘½ä»¤

### ğŸ”§ ç¯å¢ƒé…ç½®
- **æœ¬åœ°å¼€å‘**ï¼š`isUsedomainnameaddress=false`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼š`isUsedomainnameaddress=true`
- **åˆ‡æ¢æ–¹å¼**ï¼šè„šæœ¬ã€æ§åˆ¶å°ã€å¯è§†åŒ–ç•Œé¢

**æœ€åæ›´æ–°**ï¼š2025å¹´9æœˆ6æ—¥  
**æŠ€æœ¯æ”¯æŒ**ï¼šClaude Sonnet 4 AI Assistant
