<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁôªÈôÜÊ≥®ÂÜå - spot.gitagent.io</title>
    <!-- SupabaseÂÆ¢Êà∑Á´Ø -->
    <script src="./supabase-client.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10070;
        }

        .auth-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            width: 100%;
            max-width: 400px;
            margin: 20px;
        }

        .auth-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .auth-header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .auth-header h2 {
            font-size: 20px;
            margin-top: 10px;
            font-weight: 600;
            opacity: 0.95;
        }

        .auth-tabs {
            display: flex;
            background: #f8f9fa;
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .auth-content {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .auth-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
        }

        .auth-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .auth-footer {
            text-align: center;
            padding: 20px 30px;
            background: #f8f9fa;
            color: #666;
        }

        .auth-footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #fcc;
        }

        .success-message {
            background: #efe;
            color: #3c3;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #cfc;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-header">
            <h1 id="auth-title">ÁôªÈôÜÊ≥®ÂÜå</h1>
        </div>


        <div class="auth-tabs">
            <button class="tab-button active" onclick="switchTab('login')" id="login-tab">ÁôªÂΩï</button>
            <button class="tab-button" onclick="switchTab('register')" id="register-tab">Ê≥®ÂÜå</button>
        </div>

        <div class="auth-content">
            <div id="error-message" class="error-message hidden"></div>
            <div id="success-message" class="success-message hidden"></div>

            <!-- ÁôªÂΩïË°®Âçï -->
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-email" id="login-email-label">ÈÇÆÁÆ±Âú∞ÂùÄ</label>
                    <input type="email" id="login-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="login-password" id="login-password-label">ÂØÜÁ†Å</label>
                    <input type="password" id="login-password" name="password" required>
                </div>
                <button type="submit" class="auth-button" id="login-button">
                    <span id="login-text">ÁôªÂΩï</span>
                    <div class="loading hidden" id="login-loading"></div>
                </button>
            </form>

            <!-- Ê≥®ÂÜåË°®Âçï -->
            <form id="register-form" class="auth-form hidden">
                <div class="form-group">
                    <label for="register-username" id="register-username-label">Áî®Êà∑Âêç</label>
                    <input type="text" id="register-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="register-email" id="register-email-label">ÈÇÆÁÆ±Âú∞ÂùÄ</label>
                    <input type="email" id="register-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="register-password" id="register-password-label">ÂØÜÁ†Å</label>
                    <input type="password" id="register-password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="register-confirm-password" id="register-confirm-password-label">Á°ÆËÆ§ÂØÜÁ†Å</label>
                    <input type="password" id="register-confirm-password" name="confirm_password" required>
                </div>
                <button type="submit" class="auth-button" id="register-button">
                    <span id="register-text">Ê≥®ÂÜå</span>
                    <div class="loading hidden" id="register-loading"></div>
                </button>
            </form>
        </div>

        <div class="auth-footer">
            <a href="#" onclick="closeModal()" id="close-modal-link">ÂÖ≥Èó≠</a>
        </div>
    </div>

    <script src="i18n/index.js"></script>
    <script>
        // Â§öËØ≠Ë®ÄÊîØÊåÅ
        const translations = {
            zh: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "ÁôªÈôÜÊ≥®ÂÜå",
                login: "ÁôªÂΩï",
                register: "Ê≥®ÂÜå",
                emailLabel: "ÈÇÆÁÆ±Âú∞ÂùÄ",
                passwordLabel: "ÂØÜÁ†Å",
                confirmPasswordLabel: "Á°ÆËÆ§ÂØÜÁ†Å",
                usernameLabel: "Áî®Êà∑Âêç",
                emailPlaceholder: "ÈÇÆÁÆ±Âú∞ÂùÄ",
                passwordPlaceholder: "ÂØÜÁ†Å",
                confirmPasswordPlaceholder: "Á°ÆËÆ§ÂØÜÁ†Å",
                usernamePlaceholder: "Áî®Êà∑Âêç",
                welcomeBack: "Ê¨¢ËøéÂõûÊù•",
                joinUs: "Âä†ÂÖ•Êàë‰ª¨",
                close: "ÂÖ≥Èó≠",
                loginSuccess: "ÁôªÂΩïÊàêÂäüÔºÅ",
                registerSuccess: "Ê≥®ÂÜåÊàêÂäüÔºÅ",
                loginFailed: "ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï",
                registerFailed: "Ê≥®ÂÜåÂ§±Ë¥•",
                passwordMismatch: "‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥",
                emailAlreadyRegistered: "ËØ•ÈÇÆÁÆ±Â∑≤Ê≥®ÂÜåÔºåËØ∑Áõ¥Êé•ÁôªÂΩï",
                invalidCredentials: "ÈÇÆÁÆ±ÊàñÂØÜÁ†ÅÈîôËØØÔºåËØ∑Ê£ÄÊü•ÂêéÈáçËØï"
            },
            en: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Login & Register",
                login: "Login",
                register: "Register",
                emailLabel: "Email Address",
                passwordLabel: "Password",
                confirmPasswordLabel: "Confirm Password",
                usernameLabel: "Username",
                emailPlaceholder: "Email Address",
                passwordPlaceholder: "Password",
                confirmPasswordPlaceholder: "Confirm Password",
                usernamePlaceholder: "Username",
                welcomeBack: "Welcome Back",
                joinUs: "Join Us",
                close: "Close",
                loginSuccess: "Login successful!",
                registerSuccess: "Registration successful!",
                loginFailed: "Login failed, please try again",
                registerFailed: "Registration failed",
                passwordMismatch: "Passwords do not match",
                emailAlreadyRegistered: "Email already registered, please sign in directly",
                invalidCredentials: "Invalid email or password, please check and try again"
            },
            es: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Iniciar Sesi√≥n y Registrarse",
                login: "Iniciar Sesi√≥n",
                register: "Registrarse",
                emailPlaceholder: "Direcci√≥n de Email",
                passwordPlaceholder: "Contrase√±a",
                confirmPasswordPlaceholder: "Confirmar Contrase√±a",
                usernamePlaceholder: "Nombre de Usuario",
                welcomeBack: "Bienvenido de Vuelta",
                joinUs: "√önete a Nosotros",
                backToHome: "Volver al Inicio",
                loginSuccess: "¬°Inicio de sesi√≥n exitoso!",
                registerSuccess: "¬°Registro exitoso!",
                loginFailed: "Error al iniciar sesi√≥n, int√©ntalo de nuevo",
                registerFailed: "Error en el registro",
                passwordMismatch: "Las contrase√±as no coinciden",
                emailAlreadyRegistered: "El email ya est√° registrado, inicia sesi√≥n directamente",
                invalidCredentials: "Email o contrase√±a inv√°lidos, verifica e int√©ntalo de nuevo"
            },
            fr: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Connexion et Inscription",
                login: "Connexion",
                register: "Inscription",
                emailPlaceholder: "Adresse Email",
                passwordPlaceholder: "Mot de Passe",
                confirmPasswordPlaceholder: "Confirmer le Mot de Passe",
                usernamePlaceholder: "Nom d'Utilisateur",
                welcomeBack: "Bon Retour",
                joinUs: "Rejoignez-Nous",
                backToHome: "Retour √† l'Accueil",
                loginSuccess: "Connexion r√©ussie !",
                registerSuccess: "Inscription r√©ussie !",
                loginFailed: "√âchec de la connexion, r√©essayez",
                registerFailed: "√âchec de l'inscription",
                passwordMismatch: "Les mots de passe ne correspondent pas",
                emailAlreadyRegistered: "L'email est d√©j√† enregistr√©, connectez-vous directement",
                invalidCredentials: "Email ou mot de passe invalide, v√©rifiez et r√©essayez"
            },
            de: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Anmelden und Registrieren",
                login: "Anmelden",
                register: "Registrieren",
                emailPlaceholder: "E-Mail-Adresse",
                passwordPlaceholder: "Passwort",
                confirmPasswordPlaceholder: "Passwort Best√§tigen",
                usernamePlaceholder: "Benutzername",
                welcomeBack: "Willkommen Zur√ºck",
                joinUs: "Treten Sie Uns Bei",
                backToHome: "Zur√ºck zur Startseite",
                loginSuccess: "Anmeldung erfolgreich!",
                registerSuccess: "Registrierung erfolgreich!",
                loginFailed: "Anmeldung fehlgeschlagen, versuchen Sie es erneut",
                registerFailed: "Registrierung fehlgeschlagen",
                passwordMismatch: "Passw√∂rter stimmen nicht √ºberein",
                emailAlreadyRegistered: "E-Mail bereits registriert, melden Sie sich direkt an",
                invalidCredentials: "Ung√ºltige E-Mail oder Passwort, √ºberpr√ºfen und versuchen Sie es erneut"
            },
            ja: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "„É≠„Ç∞„Ç§„É≥„ÉªÊñ∞Ë¶èÁôªÈå≤",
                login: "„É≠„Ç∞„Ç§„É≥",
                register: "Êñ∞Ë¶èÁôªÈå≤",
                emailPlaceholder: "„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ",
                passwordPlaceholder: "„Éë„Çπ„ÉØ„Éº„Éâ",
                confirmPasswordPlaceholder: "„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç",
                usernamePlaceholder: "„É¶„Éº„Ç∂„ÉºÂêç",
                welcomeBack: "„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑ",
                joinUs: "ÂèÇÂä†„Åô„Çã",
                backToHome: "„Éõ„Éº„É†„Å´Êàª„Çã",
                loginSuccess: "„É≠„Ç∞„Ç§„É≥ÊàêÂäüÔºÅ",
                registerSuccess: "ÁôªÈå≤ÊàêÂäüÔºÅ",
                loginFailed: "„É≠„Ç∞„Ç§„É≥„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÅÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
                registerFailed: "ÁôªÈå≤„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",
                passwordMismatch: "„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì",
                emailAlreadyRegistered: "„Åì„ÅÆ„É°„Éº„É´„ÅØÊó¢„Å´ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÅÁõ¥Êé•„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
                invalidCredentials: "„É°„Éº„É´„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÁÑ°Âäπ„Åß„Åô„ÄÅÁ¢∫Ë™ç„Åó„Å¶ÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
            },
            ko: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Î°úÍ∑∏Ïù∏ Î∞è ÌöåÏõêÍ∞ÄÏûÖ",
                login: "Î°úÍ∑∏Ïù∏",
                register: "ÌöåÏõêÍ∞ÄÏûÖ",
                emailPlaceholder: "Ïù¥Î©îÏùº Ï£ºÏÜå",
                passwordPlaceholder: "ÎπÑÎ∞ÄÎ≤àÌò∏",
                confirmPasswordPlaceholder: "ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏",
                usernamePlaceholder: "ÏÇ¨Ïö©ÏûêÎ™Ö",
                welcomeBack: "Îã§Ïãú Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§",
                joinUs: "Ìï®ÍªòÌïòÏÑ∏Ïöî",
                backToHome: "ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
                loginSuccess: "Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ!",
                registerSuccess: "ÌöåÏõêÍ∞ÄÏûÖ ÏÑ±Í≥µ!",
                loginFailed: "Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§, Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî",
                registerFailed: "ÌöåÏõêÍ∞ÄÏûÖÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§",
                passwordMismatch: "ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§",
                emailAlreadyRegistered: "Ïù¥ÎØ∏ Îì±Î°ùÎêú Ïù¥Î©îÏùºÏûÖÎãàÎã§, ÏßÅÏ†ë Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî",
                invalidCredentials: "Ïù¥Î©îÏùº ÎòêÎäî ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏûòÎ™ªÎêòÏóàÏäµÎãàÎã§, ÌôïÏù∏ ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî"
            },
            it: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Accedi e Registrati",
                login: "Accedi",
                register: "Registrati",
                emailPlaceholder: "Indirizzo Email",
                passwordPlaceholder: "Password",
                confirmPasswordPlaceholder: "Conferma Password",
                usernamePlaceholder: "Nome Utente",
                welcomeBack: "Bentornato",
                joinUs: "Unisciti a Noi",
                backToHome: "Torna alla Home",
                loginSuccess: "Accesso riuscito!",
                registerSuccess: "Registrazione riuscita!",
                loginFailed: "Accesso fallito, riprova",
                registerFailed: "Registrazione fallita",
                passwordMismatch: "Le password non corrispondono",
                emailAlreadyRegistered: "Email gi√† registrata, accedi direttamente",
                invalidCredentials: "Email o password non valide, controlla e riprova"
            },
            pt: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Entrar e Registrar",
                login: "Entrar",
                register: "Registrar",
                emailPlaceholder: "Endere√ßo de Email",
                passwordPlaceholder: "Senha",
                confirmPasswordPlaceholder: "Confirmar Senha",
                usernamePlaceholder: "Nome de Usu√°rio",
                welcomeBack: "Bem-vindo de Volta",
                joinUs: "Junte-se a N√≥s",
                backToHome: "Voltar ao In√≠cio",
                loginSuccess: "Login bem-sucedido!",
                registerSuccess: "Registro bem-sucedido!",
                loginFailed: "Falha no login, tente novamente",
                registerFailed: "Falha no registro",
                passwordMismatch: "As senhas n√£o coincidem",
                emailAlreadyRegistered: "Email j√° registrado, fa√ßa login diretamente",
                invalidCredentials: "Email ou senha inv√°lidos, verifique e tente novamente"
            },
            ru: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "–í—Ö–æ–¥ –∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
                login: "–í–æ–π—Ç–∏",
                register: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
                emailPlaceholder: "–ê–¥—Ä–µ—Å Email",
                passwordPlaceholder: "–ü–∞—Ä–æ–ª—å",
                confirmPasswordPlaceholder: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ü–∞—Ä–æ–ª—å",
                usernamePlaceholder: "–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                welcomeBack: "–î–æ–±—Ä–æ –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å",
                joinUs: "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å",
                backToHome: "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ì–ª–∞–≤–Ω—É—é",
                loginSuccess: "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!",
                registerSuccess: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!",
                loginFailed: "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞",
                registerFailed: "–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏",
                passwordMismatch: "–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç",
                emailAlreadyRegistered: "Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –≤–æ–π–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é",
                invalidCredentials: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞"
            },
            ar: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸàÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",
                login: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
                register: "ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",
                emailPlaceholder: "ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                passwordPlaceholder: "ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",
                confirmPasswordPlaceholder: "ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",
                usernamePlaceholder: "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",
                welcomeBack: "ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ",
                joinUs: "ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸÜÿß",
                backToHome: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                loginSuccess: "ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!",
                registerSuccess: "ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!",
                loginFailed: "ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
                registerFailed: "ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",
                passwordMismatch: "ŸÉŸÑŸÖÿßÿ™ ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ©",
                emailAlreadyRegistered: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ¨ŸÑ ÿ®ÿßŸÑŸÅÿπŸÑÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ®ÿßÿ¥ÿ±ÿ©",
                invalidCredentials: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©ÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸàÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"
            },
            hi: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "‡§≤‡•â‡§ó ‡§á‡§® ‡§î‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞",
                login: "‡§≤‡•â‡§ó ‡§á‡§®",
                register: "‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞",
                emailPlaceholder: "‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ",
                passwordPlaceholder: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
                confirmPasswordPlaceholder: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç",
                usernamePlaceholder: "‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§æ‡§Æ",
                welcomeBack: "‡§µ‡§æ‡§™‡§∏ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à",
                joinUs: "‡§π‡§Æ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç",
                backToHome: "‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç",
                loginSuccess: "‡§≤‡•â‡§ó ‡§á‡§® ‡§∏‡§´‡§≤!",
                registerSuccess: "‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§∏‡§´‡§≤!",
                loginFailed: "‡§≤‡•â‡§ó ‡§á‡§® ‡§Ö‡§∏‡§´‡§≤, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç",
                registerFailed: "‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§Ö‡§∏‡§´‡§≤",
                passwordMismatch: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Æ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ñ‡§æ‡§§‡•á",
                emailAlreadyRegistered: "‡§à‡§Æ‡•á‡§≤ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§π‡•à, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Ä‡§ß‡•á ‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç",
                invalidCredentials: "‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç"
            },
            tr: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Giri≈ü ve Kayƒ±t",
                login: "Giri≈ü Yap",
                register: "Kayƒ±t Ol",
                emailPlaceholder: "E-posta Adresi",
                passwordPlaceholder: "≈ûifre",
                confirmPasswordPlaceholder: "≈ûifreyi Onayla",
                usernamePlaceholder: "Kullanƒ±cƒ± Adƒ±",
                welcomeBack: "Tekrar Ho≈ü Geldiniz",
                joinUs: "Bize Katƒ±lƒ±n",
                backToHome: "Ana Sayfaya D√∂n",
                loginSuccess: "Giri≈ü ba≈üarƒ±lƒ±!",
                registerSuccess: "Kayƒ±t ba≈üarƒ±lƒ±!",
                loginFailed: "Giri≈ü ba≈üarƒ±sƒ±z, l√ºtfen tekrar deneyin",
                registerFailed: "Kayƒ±t ba≈üarƒ±sƒ±z",
                passwordMismatch: "≈ûifreler e≈üle≈ümiyor",
                emailAlreadyRegistered: "E-posta zaten kayƒ±tlƒ±, l√ºtfen doƒürudan giri≈ü yapƒ±n",
                invalidCredentials: "Ge√ßersiz e-posta veya ≈üifre, l√ºtfen kontrol edin ve tekrar deneyin"
            },
            nl: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "Inloggen en Registreren",
                login: "Inloggen",
                register: "Registreren",
                emailPlaceholder: "E-mailadres",
                passwordPlaceholder: "Wachtwoord",
                confirmPasswordPlaceholder: "Wachtwoord Bevestigen",
                usernamePlaceholder: "Gebruikersnaam",
                welcomeBack: "Welkom Terug",
                joinUs: "Doe Mee",
                backToHome: "Terug naar Home",
                loginSuccess: "Inloggen succesvol!",
                registerSuccess: "Registratie succesvol!",
                loginFailed: "Inloggen mislukt, probeer opnieuw",
                registerFailed: "Registratie mislukt",
                passwordMismatch: "Wachtwoorden komen niet overeen",
                emailAlreadyRegistered: "E-mail al geregistreerd, log direct in",
                invalidCredentials: "Ongeldig e-mail of wachtwoord, controleer en probeer opnieuw"
            },
            he: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "◊î◊™◊ó◊ë◊®◊ï◊™ ◊ï◊î◊®◊©◊û◊î",
                login: "◊î◊™◊ó◊ë◊®",
                register: "◊î◊ô◊®◊©◊ù",
                emailPlaceholder: "◊õ◊™◊ï◊ë◊™ ◊ê◊ô◊û◊ô◊ô◊ú",
                passwordPlaceholder: "◊°◊ô◊°◊û◊î",
                confirmPasswordPlaceholder: "◊ê◊©◊® ◊°◊ô◊°◊û◊î",
                usernamePlaceholder: "◊©◊ù ◊û◊©◊™◊û◊©",
                welcomeBack: "◊ë◊®◊ï◊ö ◊î◊©◊ë",
                joinUs: "◊î◊¶◊ò◊®◊£ ◊ê◊ú◊ô◊†◊ï",
                backToHome: "◊ó◊ñ◊ï◊® ◊ú◊¢◊û◊ï◊ì ◊î◊ë◊ô◊™",
                loginSuccess: "◊î◊™◊ó◊ë◊®◊ï◊™ ◊î◊¶◊ú◊ô◊ó◊î!",
                registerSuccess: "◊î◊®◊©◊û◊î ◊î◊¶◊ú◊ô◊ó◊î!",
                loginFailed: "◊î◊™◊ó◊ë◊®◊ï◊™ ◊†◊õ◊©◊ú◊î, ◊†◊°◊î ◊©◊ï◊ë",
                registerFailed: "◊î◊®◊©◊û◊î ◊†◊õ◊©◊ú◊î",
                passwordMismatch: "◊î◊°◊ô◊°◊û◊ê◊ï◊™ ◊ê◊ô◊†◊ü ◊™◊ï◊ê◊û◊ï◊™",
                emailAlreadyRegistered: "◊î◊ê◊ô◊û◊ô◊ô◊ú ◊õ◊ë◊® ◊®◊©◊ï◊ù, ◊î◊™◊ó◊ë◊® ◊ô◊©◊ô◊®◊ï◊™",
                invalidCredentials: "◊ê◊ô◊û◊ô◊ô◊ú ◊ê◊ï ◊°◊ô◊°◊û◊î ◊ú◊ê ◊™◊ß◊ô◊†◊ô◊ù, ◊ë◊ì◊ï◊ß ◊ï◊†◊°◊î ◊©◊ï◊ë"
            },
            bg: {
                appTitle: "spot.gitagent.io",
                appSubtitle: "Discover your next spot!",
                authTitle: "–í—Ö–æ–¥ –∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
                login: "–í—Ö–æ–¥",
                register: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
                emailPlaceholder: "–ò–º–µ–π–ª –∞–¥—Ä–µ—Å",
                passwordPlaceholder: "–ü–∞—Ä–æ–ª–∞",
                confirmPasswordPlaceholder: "–ü–æ—Ç–≤—ä—Ä–¥–∏ –ø–∞—Ä–æ–ª–∞",
                usernamePlaceholder: "–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ",
                welcomeBack: "–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –æ—Ç–Ω–æ–≤–æ",
                joinUs: "–ü—Ä–∏—Å—ä–µ–¥–∏–Ω–µ—Ç–µ —Å–µ",
                backToHome: "–û–±—Ä–∞—Ç–Ω–æ –∫—ä–º –Ω–∞—á–∞–ª–æ—Ç–æ",
                loginSuccess: "–í—Ö–æ–¥—ä—Ç –µ —É—Å–ø–µ—à–µ–Ω!",
                registerSuccess: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞!",
                loginFailed: "–í—Ö–æ–¥—ä—Ç –Ω–µ—É—Å–ø–µ—à–µ–Ω, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ",
                registerFailed: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ç–∞ –Ω–µ—É—Å–ø–µ—à–Ω–∞",
                passwordMismatch: "–ü–∞—Ä–æ–ª–∏—Ç–µ –Ω–µ —Å—ä–≤–ø–∞–¥–∞—Ç",
                emailAlreadyRegistered: "–ò–º–µ–π–ª—ä—Ç –≤–µ—á–µ –µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω, –≤–ª–µ–∑—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ",
                invalidCredentials: "–ù–µ–≤–∞–ª–∏–¥–µ–Ω –∏–º–µ–π–ª –∏–ª–∏ –ø–∞—Ä–æ–ª–∞, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –∏ –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ"
            }
        };

        // ËÆæÁΩÆÁøªËØë
        window.translations = translations;

        // ÂΩìÂâçËØ≠Ë®Ä
        let currentLanguage = 'zh';

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguage();
            setupEventListeners();
            setupLanguageSync();
        });

        function initializeLanguage() {
            // ‰ªéÁà∂Á™óÂè£Ëé∑ÂèñÂΩìÂâçËØ≠Ë®Ä
            currentLanguage = window.parent ? window.parent.currentLanguage || 'zh' : 'zh';
            updateLanguageUI();
        }

        function updateLanguageUI() {
            const t = translations[currentLanguage] || translations['zh'];
            
            document.getElementById('auth-title').textContent = t.authTitle;
            document.getElementById('login-tab').textContent = t.login;
            document.getElementById('register-tab').textContent = t.register;
            
            // Êõ¥Êñ∞Ê†áÁ≠æÊñáÂ≠ó
            document.getElementById('login-email-label').textContent = t.emailLabel;
            document.getElementById('login-password-label').textContent = t.passwordLabel;
            document.getElementById('register-username-label').textContent = t.usernameLabel;
            document.getElementById('register-email-label').textContent = t.emailLabel;
            document.getElementById('register-password-label').textContent = t.passwordLabel;
            document.getElementById('register-confirm-password-label').textContent = t.confirmPasswordLabel;
            
            // Êõ¥Êñ∞Âç†‰ΩçÁ¨¶
            document.getElementById('login-email').placeholder = t.emailPlaceholder;
            document.getElementById('login-password').placeholder = t.passwordPlaceholder;
            document.getElementById('register-username').placeholder = t.usernamePlaceholder;
            document.getElementById('register-email').placeholder = t.emailPlaceholder;
            document.getElementById('register-password').placeholder = t.passwordPlaceholder;
            document.getElementById('register-confirm-password').placeholder = t.confirmPasswordPlaceholder;
            
            // Êõ¥Êñ∞ÊåâÈíÆÊñáÂ≠ó
            document.getElementById('login-text').textContent = t.login;
            document.getElementById('register-text').textContent = t.register;
            document.getElementById('close-modal-link').textContent = t.close;
        }


        function switchTab(tab) {
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tab + '-tab').classList.add('active');
            
            // ÊòæÁ§∫ÂØπÂ∫îË°®Âçï
            document.querySelectorAll('.auth-form').forEach(form => form.classList.add('hidden'));
            document.getElementById(tab + '-form').classList.remove('hidden');
            
            // Ê∏ÖÈô§Ê∂àÊÅØ
            hideMessages();
        }

        function setupEventListeners() {
            // ÁôªÂΩïË°®Âçï
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Ê≥®ÂÜåË°®Âçï
            document.getElementById('register-form').addEventListener('submit', handleRegister);
        }

        async function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            showLoading('login');
            hideMessages();
            
            try {
                console.log('üîß Â∞ùËØïSupabaseÁôªÂΩï:', email);
                
                // È¶ñÂÖàÂ∞ùËØï‰ΩøÁî®SupabaseËÆ§ËØÅ
                if (window.supabaseAuth && typeof window.supabaseAuth.signIn === 'function') {
                    try {
                        // Á°Æ‰øùSupabaseÂÆ¢Êà∑Á´ØÂ∑≤ÂàùÂßãÂåñ
                        if (!window.supabaseAuth.client) {
                            await window.supabaseAuth.initialize();
                        }
                        const result = await window.supabaseAuth.signIn(email, password);
                        console.log('‚úÖ SupabaseÁôªÂΩïÊàêÂäü:', result);
                        
                        // ‰øùÂ≠òtoken
                        if (result.session?.access_token) {
                            localStorage.setItem('access_token', result.session.access_token);
                            localStorage.setItem('user_id', result.user?.id);
                        }
                        
                        showSuccess(translations[currentLanguage].loginSuccess);
                        
                        // ÈÄöÁü•Áà∂Á™óÂè£ÁôªÂΩïÊàêÂäü
                        setTimeout(() => {
                            if (window.parent) {
                                window.parent.postMessage({ 
                                    action: 'authSuccess',
                                    user: result.user,
                                    session: result.session
                                }, '*');
                            }
                        }, 1500);
                        return;
                    } catch (supabaseError) {
                        console.log('‚ö†Ô∏è SupabaseÁôªÂΩïÂ§±Ë¥•ÔºåÂ∞ùËØïÂêéÁ´ØAPI:', supabaseError.message);
                        
                        // Â¶ÇÊûúÊòØËÆ§ËØÅÈîôËØØÔºåÁõ¥Êé•ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
                        if (supabaseError.message.includes('Invalid login credentials')) {
                            showError(translations[currentLanguage].invalidCredentials);
                            return;
                        }
                    }
                }
                
                // ÈôçÁ∫ßÂà∞ÂêéÁ´ØAPIËÆ§ËØÅ
                const apiBaseUrl = window.parent ? window.parent.API_BASE_URL || 'http://localhost:8001' : 'http://localhost:8001';
                console.log('üîß ‰ΩøÁî®ÂêéÁ´ØAPI URL:', apiBaseUrl);
                console.log('üì§ ÂèëÈÄÅÁôªÂΩïËØ∑Ê±Ç:', { email });
                
                const response = await fetch(`${apiBaseUrl}/api/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password })
                });
                
                console.log('üì• Êî∂Âà∞ÂìçÂ∫îÁä∂ÊÄÅ:', response.status);
                const data = await response.json();
                console.log('üì• ÂìçÂ∫îÊï∞ÊçÆ:', data);
                
                if (response.ok) {
                    // ‰øùÂ≠òtoken
                    localStorage.setItem('access_token', data.access_token);
                    localStorage.setItem('user_id', data.user_id);
                    
                    showSuccess(translations[currentLanguage].loginSuccess);
                    
                    // ÈÄöÁü•Áà∂Á™óÂè£ÁôªÂΩïÊàêÂäü
                    setTimeout(() => {
                        if (window.parent) {
                            window.parent.postMessage({ 
                                action: 'authSuccess',
                                token: data.access_token,
                                user: data.user
                            }, '*');
                        }
                    }, 1500);
                } else {
                    console.error('‚ùå ÂêéÁ´ØAPIÁôªÂΩïÂ§±Ë¥•:', response.status, data);
                    showError(data.detail || translations[currentLanguage].loginFailed);
                }
            } catch (error) {
                console.error('‚ùå ÁôªÂΩïËØ∑Ê±ÇÂºÇÂ∏∏:', error);
                showError(translations[currentLanguage].loginFailed);
            } finally {
                hideLoading('login');
            }
        }

        async function handleRegister(e) {
            e.preventDefault();
            
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            // È™åËØÅÂØÜÁ†Å
            if (password !== confirmPassword) {
                showError(translations[currentLanguage].passwordMismatch);
                return;
            }
            
            showLoading('register');
            hideMessages();
            
            try {
                console.log('üìù Â∞ùËØïSupabaseÊ≥®ÂÜå:', email);
                
                // È¶ñÂÖàÂ∞ùËØï‰ΩøÁî®SupabaseËÆ§ËØÅ
                if (window.supabaseAuth && typeof window.supabaseAuth.signUp === 'function') {
                    try {
                        // Á°Æ‰øùSupabaseÂÆ¢Êà∑Á´ØÂ∑≤ÂàùÂßãÂåñ
                        if (!window.supabaseAuth.client) {
                            await window.supabaseAuth.initialize();
                        }
                        const result = await window.supabaseAuth.signUp(email, password, username);
                        console.log('‚úÖ SupabaseÊ≥®ÂÜåÊàêÂäü:', result);
                        
                        showSuccess(translations[currentLanguage].registerSuccess);
                        
                        // ÂàáÊç¢Âà∞ÁôªÂΩïÊ†áÁ≠æÈ°µ
                        setTimeout(() => {
                            switchTab('login');
                            document.getElementById('login-email').value = email;
                        }, 1500);
                        return;
                    } catch (supabaseError) {
                        console.log('‚ö†Ô∏è SupabaseÊ≥®ÂÜåÂ§±Ë¥•ÔºåÂ∞ùËØïÂêéÁ´ØAPI:', supabaseError.message);
                        
                        // Â¶ÇÊûúÊòØÈÇÆÁÆ±Â∑≤Â≠òÂú®ÈîôËØØÔºåÁõ¥Êé•ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
                        if (supabaseError.message.includes('already registered')) {
                            showError(translations[currentLanguage].emailAlreadyRegistered);
                            return;
                        }
                    }
                }
                
                // ÈôçÁ∫ßÂà∞ÂêéÁ´ØAPIÊ≥®ÂÜå
                const apiBaseUrl = window.parent ? window.parent.API_BASE_URL || 'http://localhost:8001' : 'http://localhost:8001';
                console.log('üîß ‰ΩøÁî®ÂêéÁ´ØAPI URL:', apiBaseUrl);
                
                const response = await fetch(`${apiBaseUrl}/api/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ 
                        username, 
                        email, 
                        password, 
                        confirm_password: confirmPassword 
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showSuccess(translations[currentLanguage].registerSuccess);
                    
                    // ÂàáÊç¢Âà∞ÁôªÂΩïÊ†áÁ≠æÈ°µ
                    setTimeout(() => {
                        switchTab('login');
                        document.getElementById('login-email').value = email;
                    }, 1500);
                } else {
                    showError(data.detail || translations[currentLanguage].registerFailed);
                }
            } catch (error) {
                console.error('‚ùå Ê≥®ÂÜåËØ∑Ê±ÇÂºÇÂ∏∏:', error);
                showError(translations[currentLanguage].registerFailed);
            } finally {
                hideLoading('register');
            }
        }

        function showLoading(formType) {
            document.getElementById(formType + '-button').disabled = true;
            document.getElementById(formType + '-text').classList.add('hidden');
            document.getElementById(formType + '-loading').classList.remove('hidden');
        }

        function hideLoading(formType) {
            document.getElementById(formType + '-button').disabled = false;
            document.getElementById(formType + '-text').classList.remove('hidden');
            document.getElementById(formType + '-loading').classList.add('hidden');
        }

        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('success-message');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
        }

        function hideMessages() {
            document.getElementById('error-message').classList.add('hidden');
            document.getElementById('success-message').classList.add('hidden');
        }

        function closeModal() {
            // ÈÄöÁü•Áà∂Á™óÂè£ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            if (window.parent) {
                window.parent.postMessage({ action: 'closeAuthModal' }, '*');
            }
        }
        
        function goBack() {
            window.location.href = '/';
        }

        function setupLanguageSync() {
            // ÁõëÂê¨Áà∂Á™óÂè£ÁöÑËØ≠Ë®ÄÂèòÂåñ
            if (window.parent) {
                // Á´ãÂç≥ÂêåÊ≠•‰∏ÄÊ¨°
                syncWithParentLanguage();
                
                // ÂÆöÊúüÊ£ÄÊü•Áà∂Á™óÂè£ÁöÑËØ≠Ë®ÄÊòØÂê¶ÂèëÁîüÂèòÂåñ
                setInterval(() => {
                    syncWithParentLanguage();
                }, 500);
                
                // ÁõëÂê¨Áà∂Á™óÂè£ÁöÑËØ≠Ë®ÄÂèòÂåñ‰∫ã‰ª∂
                window.parent.addEventListener('languageChanged', (event) => {
                    if (event.detail && event.detail.language) {
                        currentLanguage = event.detail.language;
                        updateLanguageUI();
                    }
                });
            }
        }
        
        function syncWithParentLanguage() {
            const parentLanguage = window.parent ? window.parent.currentLanguage : null;
            if (parentLanguage && parentLanguage !== currentLanguage) {
                console.log('ËÆ§ËØÅÈ°µÈù¢ËØ≠Ë®ÄÂêåÊ≠•:', currentLanguage, '->', parentLanguage);
                currentLanguage = parentLanguage;
                updateLanguageUI();
            }
        }

    </script>
</body>
</html>
